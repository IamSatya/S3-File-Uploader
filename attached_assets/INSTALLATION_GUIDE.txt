ADMIN FEATURES - INSTALLATION GUIDE
====================================

Files to Replace:
-----------------
1. schema.ts   → shared/schema.ts  ⚠️ IMPORTANT - UPDATE THIS FIRST!
2. storage.ts  → server/storage.ts
3. routes.ts   → server/routes.ts
4. Admin.tsx   → client/src/pages/Admin.tsx

Installation Steps:
-------------------
1. Download these 4 files from attached_assets folder

2. Replace the files in your local project IN THIS ORDER:
   Step 1: Copy schema.ts to your-project/shared/schema.ts
   Step 2: Copy storage.ts to your-project/server/storage.ts
   Step 3: Copy routes.ts to your-project/server/routes.ts
   Step 4: Copy Admin.tsx to your-project/client/src/pages/Admin.tsx

3. Build and restart:
   cd /var/www/hackfiles
   npm run build
   pm2 restart all

4. Clear browser cache:
   - Hard refresh: Ctrl+Shift+R
   - Or open in Incognito mode

Features Added:
---------------
✅ Reset Password (Admin only)
   - Button in User Management table
   - Minimum 8 characters validation
   - Secure bcrypt hashing

✅ Delete User (Admin only)
   - Red delete button in User Management table
   - Confirmation dialog
   - Cannot delete own account
   - Cascade deletes user files

API Endpoints Added:
--------------------
POST   /api/admin/users/:userId/reset-password
DELETE /api/admin/users/:userId

Why schema.ts is needed:
------------------------
The schema.ts file now includes:
- resetPasswordSchema (validation for password reset)
- ResetPasswordInput type
These are required by Admin.tsx to validate password resets.

Troubleshooting:
----------------
If build fails with "resetPasswordSchema is not exported":
- Make sure you updated shared/schema.ts FIRST
- Then update the other files
- Clear node cache: rm -rf node_modules/.vite
- Rebuild: npm run build
